</p><div class="ptx" lang="en-US"><span lang="en-us"><p>Consider some set of boolean variables and a boolean formula. A set of values for the variables is called <i>satisfying</i> if the formula evaluates to true after replacing the variables by the corresponding values. A formula is called <i>unsatisfiable</i> if there exist no such set.</p><p>In general, there is no known algorithm finding the satisfying set of values in polynomial time, although it is not yet proved that such algorithm does not exist. The same holds for determining whether the given formula is unsatisfiable. Despite this there are some particular classes of boolean formulae for which the problem of satisfiability and unsatisfiability can be solved in polynomial time. Now we will define one of such classes, and your task will be to create polynomial time algorithm for it.</p><p>A <i>Horn claus</i>e is a boolean formula, constructed according to the rules below. Let <i>x</i> be a variable from the set. Then a <i>literal</i> is a boolean expression which consists only of the variable by itself or of the variable negation: either <i>x</i> (<i>positive</i> literal) or &not;x (<i>negative</i> literal). A <i>clause</i> is a disjunction of one or more literals. A <i>Horn clause</i> is a clause with at most one positive literal.</p><p>Consider some Horn clause &not;<i>n</i><sub>1</sub>&or;&not;<i>n</i><sub>2</sub>&or;&hellip;&or;&not;<i>n<sub>k</sub></i> &or;<i>p</i>. It would be more convenient to replace disjunctions with implication: (<i>n</i><sub>1</sub>&and;<i>n</i><sub>2</sub>&and;&hellip;&and;<i>n<sub>k</sub></i>)&rArr;<i>p</i>.</p><p>For consistency, when <i>succedent</i> (the right part of the implication) is empty we will imagine that there is a constant <code>false</code> specified instead; similarly empty <i>antecedent</i> (the left part of the implication) is supposed to be <code>true</code>.</p><p>Consider a formula which is a conjunction of one or more Horn clauses. In this particular case, satisfiability and unsatisfiability problems can be solved by polynomial time algorithms. Write a program that would do it.</p></span></div><p class="pst">Input</p><div class="ptx" lang="en-US"><span lang="en-us"><p>The file consists of formulae, written according to the following BNF. Here [&lsaquo;expression&rsaquo;] means that expression may be omitted, {&lsaquo;expression&rsaquo;} means that expression may occur zero or more times. Characters in quotes denote themselves.</p><div align="center"><table bordercolor="#000000"><tr><td align="right">&lsaquo;char&rsaquo;</td><td align="center" width="10%"><span lang="en-us">&rarr;</span></td><td><span lang="en-us">&lsquo;<code>A</code>&rsquo; | &lsquo;<code>B</code>&rsquo; | &hellip; | &lsquo;<code>Z</code>&rsquo;</span></td></tr><tr><td align="right">&lsaquo;variable&rsaquo;</td><td align="center" width="10%"><span lang="en-us">&rarr;</span></td><td><span lang="en-us">&lsaquo;char&rsaquo; {&lsaquo;char&rsaquo;}</span></td></tr><tr><td align="right">&lsaquo;horn-clause&rsaquo;</td><td align="center" width="10%"><span lang="en-us">&rarr;</span></td><td><span lang="en-us">&lsquo;<code>(</code>&rsquo; [&lsaquo;variable&rsaquo; {&lsquo;<code>&amp;</code>&rsquo; &lsaquo;variable&rsaquo;}] &lsquo;<code>=&gt;</code>&rsquo; &lsaquo;variable&rsaquo; &lsquo;<code>)</code>&rsquo;</span></td></tr><tr><td align="right"></td><td align="center" width="10%">|</td><td><span lang="en-us">&lsquo;<code>(</code>&rsquo; &lsaquo;variable&rsaquo; {&lsquo;<code>&amp;</code>&rsquo; &lsaquo;variable&rsaquo;} &lsquo;<code>=&gt;</code>&rsquo; [&lsaquo;variable&rsaquo;] &lsquo;<code>)</code>&rsquo;</span></td></tr><tr><td align="right">&lsaquo;formula&rsaquo;</td><td align="center" width="10%"><span lang="en-us">&rarr;</span></td><td><span lang="en-us">&lsaquo;horn-clause&rsaquo; {&lsquo;<code>&amp;</code>&rsquo; &lsaquo;horn-clause&rsaquo;}</span></td></tr></table></div><p>Each formula is specified in a separate line. The total length of the input file does not exceed 20 000 characters.</p></span></div><p class="pst">Output</p><div class="ptx" lang="en-US"><span lang="en-us"><p>Your output must contain either the set of variables with their values that satisfy the corresponding formulae, or word &ldquo;<code>unsatisfiable</code>&rdquo;. The variables may be specified in arbitrary order; the value for each variable must be specified exactly once. If there is more than one satisfying set, output any one.</p></span></div><p class="pst">Sample Input</p><pre class="sio">(A&B&C=>QQQQ)&(=>A)
(A=>)&(=>A)</pre><p class="pst">Sample Output</p><pre class="sio">A=true,C=false,B=false,QQQQ=false
unsatisfiable</pre><p class="pst">